{"name":"Pigsty","tagline":"EMR / PIG workflow","body":"# pigsty - Your analytics workflow helper\r\n\r\nThis project is using [Readme Driven Development](http://tom.preston-werner.com/2010/08/23/readme-driven-development.html).\r\n\r\nNone of the features described here is fully/partialy working, once it is, the README will reflect it. If you have contributions or feedbacks please feel welcome to do so.\r\n\r\n## Why?\r\n\r\nWorking at [Gogobot](http://www.gogobot.com), we have multiple tasks running on map-reduce every day.\r\n\r\nThose tasks are typically ran on EMR, for 45-120 minutes at a time.\r\n\r\nOnce a cluster is running, we want to queue up some tasks (steps) to it.\r\n\r\nSince we don't want to spend money on idling clusters, we want to kill the cluster at the end.\r\n\r\nThis of course is covered by logs, monitoring and more.\r\n\r\n## Features\r\n\r\n1. Launch a cluster\r\n2. Termination protection (optional)\r\n3. Cutom bootstrapping steps configuration\r\n4. Custom Steps configuration\r\n5. Kill timers\r\n6. Logs -> JSON log support for Logstash\r\n\r\n## How it works?\r\n\r\n### Prerequisites\r\n\r\nYou need to define 2 environment variables for this command to work\r\n\r\n`AWS_SECRET_ACCESS_KEY` and `AWS_ACCESS_KEY_ID`, this should be for a user that **has** acces to creating/terminating EMR clusters.\r\n\r\n### Configuration\r\n\r\nThe command has multiple configuration options\r\n\r\n#### Command line Arguments\r\n\r\n1. `log-uri`: Where do you want to keep the logs of your steps/cluster run. Default: none\r\n2. `cluster-name`: Name of the cluster that will be created. Default: `Pigsty`\r\n3. `key-name`: AWS KeyPair that will be assigned to the cluster. Default none\r\n4. `instance-count`: How many instances should your cluster include: Default: `3`\r\n5. `master-instance-type`: Instance Type for the master node. Default `m3.xlarge`\r\n6. `slave-instance-type`: Instance Type for the slave node. Default `m3.xlarge`\r\n7. `bootstrap-actions-file`: Location of the bootstrap steps configuration file (See bootstrap steps configuration structure). Default none\r\n8. `steps-configuration-file`: Location of the steps configuration file (See Steps json structure). Default non\r\n9. `kill-when-idle`: true/false whether to kill the instance(s) when the steps are finished. Default true\r\n\r\n#### JSON steps cnofiguration (for bootstrap actions)\r\n\r\nIf you want to have bootstrap actions attached to your cluster, the command needs to include a `bootstrap-actions-file`.  \r\nThis is just a simple JSON file that needs to look like this:\r\n\r\n```javascript\r\n\r\n  [\r\n      {\r\n          \"Args\": [\r\n              \"1\",\r\n              \"2\",\r\n              \"3\"\r\n          ],\r\n          \"Path\": \"s3://some_bucket_name/some-bootstrap-file-1\"\r\n      },\r\n      {\r\n          \"Args\": [\r\n              \"1\",\r\n              \"2\",\r\n              \"3\"\r\n          ],\r\n          \"Path\": \"s3://some_bucket_name/some-bootstrap-file-2\"\r\n      },\r\n      {\r\n          \"Args\": [\r\n              \"1\",\r\n              \"2\",\r\n              \"3\"\r\n          ],\r\n          \"Path\": \"s3://some_bucket_name/some-bootstrap-file-3\"\r\n      }\r\n  ]\r\n  \r\n```\r\n\r\n#### Steps\r\n\r\nSteps is a similar configuration file like bootstrap steps\r\n\r\n```javascript\r\n\r\n  [\r\n      {\r\n          \"ActionOnFailure\": \"CONTINUE\",\r\n          \"Name\": \"Name of your Pig Program\",\r\n          \"Type\": \"PIG\"\r\n          \"Args\": [\r\n              \"-f\",\r\n              \"s3://your-bucket/script.pig\",\r\n              \"-p\",\r\n              \"lib_folder=/home/hadoop/pig/lib/\"\r\n          ],\r\n  \r\n      }\r\n  ]\r\n  \r\n```\r\n\r\n\r\n\r\n## Contibutors\r\n\r\n[@kensodev](http://twitter.com/kensodev) [Github](http://github.com/KensoDev)  \r\n\r\n## License\r\n\r\nSee `LICENSE` file, but you already know the drill with my repos probably :)\r\n\r\n## Contribute / Bug reports\r\n\r\nPlease feel free to open issues, add PRs, documentation, question or anything else.\r\n\r\nIf you want to contribute please make sure you add tests.","google":"UA-64459223-1","note":"Don't delete this file! It's used internally to help with page regeneration."}